#:import MDDropdownMenu kivymd.uix.menu.MDDropdownMenu
#:import MDFlatButton kivymd.uix.button.MDFlatButton

<MButton@MDFlatButton>
	text_color: 1, 1, 1, 1
	md_bg_color: 0, 0, 0, 1
	font_size: '14sp'

<Container>:
	name: 'container'

	canvas:
		Color:
			rgba: 0.7411764705882353, 0.7411764705882353, 0.7411764705882353, 1
		Rectangle:
			size: self.size
			pos: self.pos

	GridLayout:
		rows: 3

		GridLayout:
			cols: 3
			size_hint_y: 0.057
			padding: 1
			spacing: dp(1)

			NonPressButton:
				id: gotoSettings
				text: 'Дополнительно'
				size_hint_x: 1
				text_color: 1, 1, 1, 1
				md_bg_color: 0, 0, 0, 1
				font_size: '14sp'
				on_release:
					root.manager.current = 'settings'
					root.manager.transition.direction = 'right'

			MButton:
				id: fontSpinner
				size_hint_x: 1
				text_color: 1, 1, 1, 1
				md_bg_color: 0, 0, 0, 1
				on_text: root.fontChanged()
				on_release: MDDropdownMenu(items=app.fonts, width_mult=3).open(self)

			NonPressButton:
				id: reloadBtn
				size_hint_x: 1
				text_color: 1, 1, 1, 1
				md_bg_color: 0, 0, 0, 1
				font_size: '14sp'

		GridLayout:
			cols: 1
			rows: 1
			padding: [0, 5]

			ScrollView:
				id: scrollArea
				scroll_timeout: 250
				padding: [0, 1, 0, 0]

				MDLabel:
					id: rst
					text_size: root.width, None
					size_hint_y: None
					background_color : 0, 0, 0, 0
					text: ""
					height: self.texture_size[1]
					markup: True
					on_text: root.scheduleChanged()

		AnchorLayout:
			id: errorLayout
			anchor_x: 'center'
			anchor_y: 'bottom'
			size_hint_y: 0

			Label:
				id: errorLabel
				text: ""
				color: (1, 0.2, 0.2, 1)
				font_size: '14sp'

<Settings>:
	name: 'settings'

	canvas:
		Color:
			rgba: 0.7411764705882353, 0.7411764705882353, 0.7411764705882353, 1
		Rectangle:
			size: self.size
			pos: self.pos

	BoxLayout:
		orientation: 'vertical'
		padding: 2
		spacing: "2dp"

		NonPressButton:
			id: gotoContainer
			text_color: 1, 1, 1, 1
			md_bg_color: 0, 0, 0, 1
			font_size: '14sp'
			size_hint_y: 0.073
			size_hint_x: 1
			text: 'Назад'

			on_release:
				root.gotoPressed()
				root.manager.current = 'container'
				root.manager.transition.direction = 'left'

		MButton:
			id: instSpinner
			size_hint_y: 0.073
			size_hint_x: 1
			text_color: 1, 1, 1, 1
			md_bg_color: 0, 0, 0, 1
			on_text: root.instChanged()
			on_release: MDDropdownMenu(items=app.insts, width_mult=3).open(self)

		MButton:
			id: courseSpinner
			size_hint_y: 0.073
			size_hint_x: 1
			text_color: 1, 1, 1, 1
			md_bg_color: 0, 0, 0, 1
			on_text: root.courseChanged()
			on_release: MDDropdownMenu(items=root.courses, width_mult=3).open(self)

		MButton:
			id: groupSpinner
			size_hint_y: 0.073
			size_hint_x: 1
			text_color: 1, 1, 1, 1
			md_bg_color: 0, 0, 0, 1
			on_text: root.groupChanged()
			on_release: MDDropdownMenu(items=root.groups, width_mult=3).open(self)

		GridLayout:
			padding: [0, 100]